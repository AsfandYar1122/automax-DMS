function format(d) {
    // `d` is the original data object for the row
    return '<table style="width: 100%">' +
        '<tr>' +
        '<td class="td-img" rowspan="4"><img class="img-responsive" src="' + d.img + '"></td>' +
        '<td colspan="3"><span class="td-main-data">' + d.make + '</span><br><span class="td-main-header">' + d.summary + '</span></td>' +
        '<td colspan="2"><div class="pull-right">' +
        '<a class="td-link" href="#">VIR</a>' +
        '<a class="td-link" href="#">Edit Info</a>' +
        '<a class="td-link" href="#">Image Gallery</a>' +
        '<a class="td-link" href="#">Delete</a></div>' +
        '</td>' +
        '</tr>' +
        '<tr>' +
        '<td><span class="td-header">Status:</span><br><span class="td-data">' + d.status + '</span></td>' +
        '<td><span class="td-header">Odometer:</span><br><span class="td-data">' + d.odometer + '</span></td>' +
        '<td><span class="td-header">Upload Date</span><br><span class="td-data">' + d.upload_date + '</span></td>' +
        '<td><span class="td-header">Buy Now / Whole Sale Price</span><br><span class="td-data">' + d.w_price + '</span></td>' +
        '<td><span class="td-header">MSRP</span><br><span class="td-data">' + d.msrp + '</span></td>' +
        '</tr>' +
        '<tr>' +
        '<td><span class="td-header">Stock #:</span><br><span class="td-data">' + d.stock_no + '</span></td>' +
        '<td><span class="td-header">Viewed:</span><br><span class="td-data">' + d.view_count + '</span></td>' +
        '<td><span class="td-header">Current Price:</span><br><span class="td-data">' + d.c_price + '</span></td>' +
        '<td><span class="td-header">Cosigned Price:</span><br><span class="td-data">' + d.co_price + '</span></td>' +
        '<td><span class="td-header">Book Value:</span><br><span class="td-data">' + d.b_value + '</span></td>' +
        '</tr>' +
        '<tr>' +
        '<td><span class="td-header">VIN #:</span><br><span class="td-data">' + d.vin_no + '</span></td>' +
        '<td><span class="td-header">Owner:</span><br><span class="td-data">' + d.owner + '</span></td>' +
        '<td><span class="td-header">Monthly Payment:</span><br><span class="td-data">' + d.m_payment + '</span></td>' +
        '<td><span class="td-header">Sale Cost:</span><br><span class="td-data">' + d.s_cost + '</span></td>' +
        '<td><span class="td-header">Internet Price</span><br><span class="td-data">' + d.i_price + '</span></td>' +
        '</tr>' +
        '</table>';
}
$(function () {
    var table = $('.table').DataTable({
            "scrollX": true,
            "data": [
                {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }, {
                    "summary": "R35 GTR",
                    "vin": "n/a",
                    "p_num": "n/a",
                    "make": "Nissan",
                    "model": "2017",
                    "trim": "n/a",
                    "po_num": "n/a",
                    "title": "n/a",
                    "vir_done": "n/a",
                    "odometer": "n/a",
                    "price": "n/a",
                    "m_pmt": "n/a",
                    "img": "http://blog.caranddriver.com/wp-content/uploads/2014/03/2015-Nissan-GT-R-NISMO-placement-626x382.jpg",
                    "status": "n/a",
                    "upload_date": "n/a",
                    "w_price": "n/a",
                    "msrp": "n/a",
                    "stock_no": "n/a",
                    "view_count": "n/a",
                    "c_price": "n/a",
                    "co_price": "n/a",
                    "b_value": "n/a",
                    "vin_no": "n/a",
                    "owner": "n/a",
                    "m_payment": "n/a",
                    "s_cost": "n/a",
                    "i_price": "n/a"
                }],
            "columns": [
                {
                    "className": 'details-control',
                    "orderable": false,
                    "data": null,
                    "defaultContent": '<i class="fa fa-caret-right orange-color"></i>'
                },
                {"data": "summary"},
                {"data": "vin"},
                {"data": "p_num"},
                {"data": "make"},
                {"data": "p_num"},
                {"data": "model"},
                {"data": "po_num"},
                {"data": "title"},
                {"data": "vir_done"},
                {"data": "odometer"},
                {"data": "price"},
                {"data": "m_pmt"}
            ],
            "order": [[1, 'asc']]
        })
        ;

    $('.table tbody').on('click', 'td.details-control', function () {
        var tr = $(this).closest('tr');
        var row = table.row(tr);

        if (row.child.isShown()) {
            // This row is already open - close it
            row.child.hide();
            $("i", this).removeClass("fa fa-caret-down").addClass("fa fa-caret-right");
            tr.removeClass('shown');
        }
        else {
            // Open this row
            row.child(format(row.data())).show();
            $("i", this).removeClass("fa fa-caret-right").addClass("fa fa-caret-down");
            tr.addClass('shown');
        }
    });
});
